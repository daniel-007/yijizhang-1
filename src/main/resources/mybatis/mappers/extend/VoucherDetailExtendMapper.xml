<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.ahyc.yjz.mapper.extend.VoucherDetailExtendMapper">
  <resultMap id="BaseResultMap" type="cn.ahyc.yjz.model.VoucherDetail">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 23 16:59:46 CST 2015.
    -->
    <constructor>
      <idArg column="id" javaType="java.lang.Long" jdbcType="BIGINT" />
      <arg column="subject_code" javaType="java.lang.Long" jdbcType="BIGINT"/>
      <arg column="debit" javaType="java.math.BigDecimal" jdbcType="DECIMAL" />
      <arg column="credit" javaType="java.math.BigDecimal" jdbcType="DECIMAL" />
      <arg column="summary" javaType="java.lang.String" jdbcType="VARCHAR" />
      <arg column="voucher_id" javaType="java.lang.Long" jdbcType="BIGINT" />
      <arg column="create_time" javaType="java.util.Date" jdbcType="TIMESTAMP" />
      <arg column="modify_time" javaType="java.util.Date" jdbcType="TIMESTAMP" />
    </constructor>
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 23 16:59:46 CST 2015.
    -->
    id, subject_code, debit, credit, summary, voucher_id, create_time, modify_time
  </sql>
  <select id="selectProfitAndLoss" parameterType="java.util.Map" resultMap="BaseResultMap">
    SELECT a.id,a.subject_code,a.debit,a.credit,a.summary,a.voucher_id,a.create_time,a.modify_time FROM voucher_detail  a,voucher b,period c
	WHERE a.voucher_id=b.id
	AND   b.period_id=c.id
	AND   c.book_id=#{bookId,jdbcType=BIGINT}
	AND   c.current_period=#{currentPeriod,jdbcType=INTEGER}
	ORDER BY a.id ASC
  </select>
  
</mapper>